<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>navnirman.ai - Smart E-Waste Management</title>
    
    <!-- Add Bootstrap CSS first -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Add Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <!-- Your custom CSS -->
    <link rel="stylesheet" href="./stylesheet/style.css">
    
    <!-- Remove Bootstrap JS from here -->
    <style>
        /* Chatbot Container Styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
       
        /* Chatbot Toggle Button */
        .chatbot-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #4CAF50;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: absolute;
            bottom: 0;
            right: 0;
            transition: all 0.3s ease;
            overflow: hidden;
        }
       
        .chatbot-button:hover {
            background-color: #3e8e41;
        }
       
        .chatbot-button img {
            width: 30px;
            height: 30px;
        }
       
        /* Chatbot Interface Styles */
        .chatbot-interface {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }
       
        .chatbot-interface.active {
            display: flex;
        }
       
        /* Chatbot Header */
        .chatbot-header {
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
       
        .chatbot-title {
            display: flex;
            align-items: center;
        }
       
        .chatbot-title img {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }
       
        .chatbot-close {
            cursor: pointer;
            font-size: 18px;
        }
       
        /* Chatbot Messages Area */
        .chatbot-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
       
        .message {
            max-width: 80%;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 18px;
            line-height: 1.4;
            position: relative;
            word-wrap: break-word;
        }
       
        .bot-message {
            background-color: #f1f1f1;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
       
        .user-message {
            background-color: #DCF8C6;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
       
        /* Quick Reply Buttons */
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
            align-self: flex-start;
        }
       
        .quick-reply {
            background-color: #e9f5ff;
            color: #0078D7;
            border: 1px solid #0078D7;
            border-radius: 15px;
            padding: 5px 10px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background-color 0.2s;
        }
       
        .quick-reply:hover {
            background-color: #d0e9ff;
        }
       
        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background-color: #f1f1f1;
            padding: 8px 15px;
            border-radius: 18px;
            margin-bottom: 10px;
        }
       
        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: #999;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            animation: typing 1s infinite ease-in-out;
        }
       
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
       
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
            margin-right: 0;
        }
       
        @keyframes typing {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
       
        /* Chatbot Input Area */
        .chatbot-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #e9e9e9;
            background-color: #f9f9f9;
        }
       
        .chatbot-input input {
            flex: 1;
            border: none;
            outline: none;
            padding: 10px;
            border-radius: 20px;
            background-color: white;
            border: 1px solid #e0e0e0;
        }
       
        .chatbot-input button {
            border: none;
            background-color: #4CAF50;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
       
        .chatbot-input button:hover {
            background-color: #3e8e41;
        }
       
        /* Mobile Responsive Styles */
        @media (max-width: 480px) {
            .chatbot-interface {
                width: 100%;
                height: 100%;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }
           
            .chatbot-button {
                bottom: 20px;
                right: 20px;
            }
        }
        /* Add these styles to change chatbot text colors to black */

/* For user messages */
.user-message {
    background-color: #DCF8C6;
    align-self: flex-end;
    border-bottom-right-radius: 5px;
    color: black; /* Explicitly set text color to black */
}

/* For bot messages */
.bot-message {
    background-color: #f1f1f1;
    align-self: flex-start;
    border-bottom-left-radius: 5px;
    color: black; /* Explicitly set text color to black */
}

/* For quick reply buttons */
.quick-reply {
    background-color: #e9f5ff;
    color: black; /* Change from blue to black */
    border: 1px solid #0078D7;
}

/* Input text color */
.chatbot-input input {
    color: black;
}

.profile-section {
    display: none;
    position: relative;
    padding: 10px 20px;
    border-radius: 25px;
    transition: all 0.3s ease;
    margin-left: 15px;
}

.profile-section.active {
    display: flex;
    align-items: center;
    background: rgba(12, 40, 5, 0.668);
    border: 1px solid rgba(0, 255, 0, 0.2);
}

.profile-section:hover {
    background: rgba(0, 255, 0, 0.25);
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 255, 0, 0.2);
}

.profile-dropdown {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    right: 0;
    top: 130%;
    background: rgba(0, 0, 0, 0.95);
    padding: 20px;
    border-radius: 15px;
    min-width: 250px;
    z-index: 1000;
    box-shadow: 0 8px 32px rgba(0, 255, 0, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 255, 0, 0.1);
    transform: translateY(10px);
    transition: all 0.3s ease, visibility 0.3s ease;
    pointer-events: none;
}

.profile-section:hover .profile-dropdown {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

/* Add padding to create a hoverable area between profile and dropdown */
.profile-dropdown::after {
    content: '';
    position: absolute;
    top: -20px;
    left: 0;
    right: 0;
    height: 20px;
}

.profile-dropdown::before {
    content: '';
    position: absolute;
    top: -8px;
    right: 25px;
    width: 15px;
    height: 15px;
    background: rgba(0, 0, 0, 0.95);
    transform: rotate(45deg);
    border-left: 1px solid rgba(0, 255, 0, 0.1);
    border-top: 1px solid rgba(0, 255, 0, 0.1);
}

.profile-dropdown a {
    display: flex;
    align-items: center;
    padding: 15px;
    color: #fff;
    text-decoration: none;
    transition: all 0.3s ease;
    border-radius: 10px;
    margin-bottom: 5px;
    font-size: 1rem;
    letter-spacing: 0.3px;
    white-space: nowrap;
}

.profile-dropdown a i {
    margin-right: 12px;
    color: #0f0;
    font-size: 1.2rem;
    transition: all 0.3s ease;
    min-width: 20px;
    text-align: center;
}

.profile-dropdown a:hover {
    background-color: rgba(0, 255, 0, 0.15);
    transform: translateX(5px);
    padding-left: 20px;
}

.profile-dropdown a:hover i {
    transform: scale(1.1);
}

/* Add hover area above dropdown */
.profile-section::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 0;
    right: 0;
    height: 20px;
}

.profile-name {
    color: rgb(255, 255, 255);
    text-decoration: none;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    font-size: 1.1rem;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.profile-name i {
    margin-left: 8px;
    transition: transform 0.3s ease;
    font-size: 1.1rem;
}

.profile-section:hover .profile-name i {
    transform: rotate(180deg);
}

.profile-name:hover {
    color: #0f0;
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
}

.profile-dropdown .menu-divider {
    height: 1px;
    background: rgba(0, 255, 0, 0.1);
    margin: 10px 0;
}

.profile-dropdown .sign-out {
    color: #ff4444;
    border-top: 1px solid rgba(255, 68, 68, 0.1);
    margin-top: 5px;
}

.profile-dropdown .sign-out:hover {
    background-color: rgba(255, 68, 68, 0.1);
}
.auth-hidden {
    display: none !important;
}

/* Modify the existing auth-btn class to handle initial state */
.auth-btn {
    padding: 10px 20px;
    background-color: #ffffff;
    color: #010d1c;
    border-radius: 5px;
    text-decoration: none;
    transition: all 0.3s ease;
    display: block;
    font-weight: bold;
}

.auth-btn:hover {
    background-color: #dacdb5ce;
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.profile-section {
    display: none;  /* Hide by default until auth state is confirmed */
}

.profile-section.active {
    display: block;
}
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDtOWJd8duOmOctCfEQQESRY817v5dRH1k",
            authDomain: "navnirmanai-1a761.firebaseapp.com",
            projectId: "navnirmanai-1a761",
            storageBucket: "navnirmanai-1a761.firebasestorage.app",
            messagingSenderId: "569693452065",
            appId: "1:569693452065:web:01f06b54409835539bb060"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Auth state observer
        auth.onAuthStateChanged((user) => {
            const signInBtn = document.querySelector('.auth-btn');
            const profileSection = document.querySelector('.profile-section');
            
            if (user) {
                // User is signed in
                signInBtn.style.display = 'none'; // Hide sign in button
                profileSection.classList.add('active');
                
                // Update profile name
                const profileName = document.querySelector('.profile-name');
                profileName.textContent = user.displayName || user.email;
            } else {
                // User is signed out
                signInBtn.style.display = 'block'; // Show sign in button
                profileSection.classList.remove('active');
            }
        });

        // Sign out function
        function signOut() {
            auth.signOut().then(() => {
                window.location.href = 'index.html';
            }).catch((error) => {
                console.error('Error signing out:', error);
            });
        }

        // Check if user is authenticated for protected pages
        function checkAuth() {
            const protectedPages = ['profile.html', 'rewards.html', 'pickup.html'];
            const currentPage = window.location.pathname.split('/').pop();
            
            if (protectedPages.includes(currentPage)) {
                auth.onAuthStateChanged((user) => {
                    if (!user) {
                        window.location.href = 'signin.html';
                    }
                });
            }
        }

        // Run auth check when page loads
        document.addEventListener('DOMContentLoaded', checkAuth);
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="./images/pic1.png" alt="navnirman.ai Logo">
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="./pages/about.html">About Us</a></li>
                <li><a href="./pages/services.html">Services</a></li>
                <li><a href="./pages/events.html">Book an Event</a></li>
                <li><a href="./pages/signin.html" class="auth-btn">Sign In / Up</a></li>
                <li class="profile-section">
                    <a href="#" class="profile-name">
                        Profile
                        <i class="bi bi-chevron-down"></i>
                    </a>
                    <div class="profile-dropdown">
                        <a href="./pages/profile.html">
                            <i class="bi bi-person-circle"></i>
                            My Profile
                        </a>
                        <div class="menu-divider"></div>
                        <a href="./pages/support.html">
                            <i class="bi bi-headset"></i>
                            Customer Support
                        </a>
                        <a href="./pages/settings.html">
                            <i class="bi bi-gear"></i>
                            Settings
                        </a>
                        <div class="menu-divider"></div>
                        <a href="#" class="sign-out" onclick="signOut()">
                            <i class="bi bi-box-arrow-right"></i>
                            Sign Out
                        </a>
                    </div>
                </li>
            </ul>
        </nav>
    </header>
   
    <!-- Hero Section with Carousel -->
    <section class="hero-section">
        <!-- Carousel - Added carousel-fade class to prevent slide overlap -->
        <div id="carouselExample" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="5000">
            <div class="carousel-inner">
                <!-- Slide 1 -->
                <div class="carousel-item active" style="background-image: url('https://newindianetwork.com/wp-content/uploads/2023/09/e-waste-banner.jpg')">
                    <div class="carousel-content">
                        <h3>"Turn Your Old Electronics into a Greener Future!"</h3>
                        <p>Find nearby recycling centers and schedule pickups‚Äîall with a simple click.</p>
                        <a href="./pages/pickup.html" class="carousel-btn">Start Recycling Now</a>
                    </div>
                </div>
                <!-- Slide 2 -->
                <div class="carousel-item" style="background-image: url('https://csiship.mystagingwebsite.com/wp-content/uploads/2020/06/Untitled-2.png')">
                    <div class="carousel-content">
                        <h3>"No Need to Travel‚ÄîWe'll Collect Your E-Waste!"</h3>
                        <p>Schedule a home pickup for bulky items like old TVs, refrigerators, and more.</p>
                        <a href="./pages/pickup.html" class="carousel-btn">Book a Pickup</a>
                    </div>
                </div>
                <!-- Slide 3 -->
                <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1504384764586-bb4cdc1707b0?ixlib=rb-4.0.3')">
                    <div class="carousel-content">
                        <h3>"Want to conduct E-Waste related events?"</h3>
                        <p>Let us know and we'll help you organize it. Or join our events and make a difference!</p>
                        <a href="./pages/events.html" class="carousel-btn">Book Now</a>
                    </div>
                </div>
                <!-- Slide 4 -->
                <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-4.0.3')">
                    <div class="carousel-content">
                        <h3>"Make a Difference & Get Rewarded!"</h3>
                        <p>Every time you recycle, you're helping the environment and earning rewards like points, discounts, and more!</p>
                        <a href="#" class="carousel-btn">Recycle and Earn</a>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </section>
   
    <!-- Section Divider -->
    <div class="section-divider"></div>
   
    <!-- How It Works Section -->
    <section class="how-it-works">
        <div class="container">
            <div class="section-title-container">
                <h2 class="section-title">How It Works</h2>
                <p class="section-subtitle">Our simple 4-step process makes recycling your e-waste effortless and rewarding</p>
            </div>
           
            <div class="row g-4">
                <!-- Step 1 -->
                <div class="col-md-3">
                    <div class="process-step">
                        <div class="step-number">1</div>
                        <i class="bi bi-calendar-check process-icon"></i>
                        <h4>Schedule</h4>
                        <p>Book a pickup or find a nearby drop-off location using our app or website</p>
                        <!-- Connector between steps -->
                        <div class="process-connector d-none d-md-block"></div>
                    </div>
                </div>
               
                <!-- Step 2 -->
                <div class="col-md-3">
                    <div class="process-step">
                        <div class="step-number">2</div>
                        <i class="bi bi-truck process-icon"></i>
                        <h4>Collection</h4>
                        <p>We'll collect your e-waste from your home or meet you at a convenient drop-off point</p>
                        <div class="process-connector d-none d-md-block"></div>
                    </div>
                </div>
               
                <!-- Step 3 -->
                <div class="col-md-3">
                    <div class="process-step">
                        <div class="step-number">3</div>
                        <i class="bi bi-recycle process-icon"></i>
                        <h4>Recycling</h4>
                        <p>Your e-waste is properly sorted, data-wiped, and recycled at certified facilities</p>
                        <div class="process-connector d-none d-md-block"></div>
                    </div>
                </div>
               
                <!-- Step 4 -->
                <div class="col-md-3">
                    <div class="process-step">
                        <div class="step-number">4</div>
                        <i class="bi bi-award process-icon"></i>
                        <h4>Rewards</h4>
                        <p>Earn points for each item recycled that can be redeemed for discounts and eco-friendly products</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
   
    <!-- Section Divider -->
    <div class="section-divider"></div>
   
    <!-- Customer Reviews Section -->
    <section class="reviews-section">
        <div class="reviews-bg"></div>
        <div class="container py-4">
            <div class="section-title-container">
                <h2 class="section-title">What Our Customers Say</h2>
                <p class="section-subtitle">Real experiences from people who've used our e-waste management services</p>
            </div>
           
            <div class="row">
                <!-- Review Card 1 -->
                <div class="col-md-4 mb-4">
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-img">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Reviewer">
                            </div>
                            <div class="reviewer-info">
                                <h5>Rajesh Sharma</h5>
                                <div class="stars">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                </div>
                            </div>
                        </div>
                        <p class="review-text">The home pickup service was incredibly convenient. I had several old computers and monitors taking up space in my garage. The team arrived on time, was professional, and even helped me carry the heavier items. Highly recommend!</p>
                        <div class="review-date">March 12, 2025</div>
                    </div>
                </div>
               
                <!-- Review Card 2 -->
                <div class="col-md-4 mb-4">
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-img">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Reviewer">
                            </div>
                            <div class="reviewer-info">
                                <h5>Priya Patel</h5>
                                <div class="stars">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-half"></i>
                                </div>
                            </div>
                        </div>
                        <p class="review-text">I used the AI chatbot to find the nearest recycling center for my old smartphone and it gave me precise directions. The rewards system is a nice bonus - I've already earned enough points for a discount on my next recycling service!</p>
                        <div class="review-date">February 28, 2025</div>
                    </div>
                </div>
               
                <!-- Review Card 3 -->
                <div class="col-md-4 mb-4">
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-img">
                                <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Reviewer">
                            </div>
                            <div class="reviewer-info">
                                <h5>Vikram Singh</h5>
                                <div class="stars">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                </div>
                            </div>
                        </div>
                        <p class="review-text">"As a small business owner, proper e-waste disposal was becoming a compliance headache. navnirman.ai made it effortless with their bulk collection service. Their documentation for regulatory purposes was comprehensive and saved me a lot of time."</p>
                        <div class="review-date">March 5, 2025</div>
                    </div>
                </div>
            </div>
           
            <div class="row mt-3">
           
            <!-- Add review button -->
            <div class="row text-center mt-4">
                <div class="col-12">
                    <a href="#" class="reviews-btn">Share Your Experience</a>
                </div>
            </div>
        </div>
    </section>
   
    <!-- Enhanced Footer -->
    <footer>
        <div class="footer-column">
            <h3>Company</h3>
            <ul>
                <li><a href="./pages/about.html">About Us</a></li>
                <li><a href="./pages/services.html">Our Services</a></li>
                <li><a href="#">Privacy Policy</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Get Help</h3>
            <ul>
                <li><a href="#">FAQ</a></li>
                <li><a href="#">Status</a></li>
                <li><a href="#">Payment Options</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Contact us</h3>
            <ul>
                <li><a href="#">navnirman.ai@gmail.com</a></li>
                <li><a href="#">9967960193</a></li>
            </ul>
        </div>
    </footer>
   
    <!-- Floating Chatbot Container -->
    <div class="chatbot-container">
        <!-- Chatbot Toggle Button -->
        <div class="chatbot-button" id="chatbot-button">
            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiPjxwYXRoIGQ9Ik0yMCA0aC0zLjJjLS40LTEuMS0xLjUtMi0yLjgtMi0xLjMgMC0yLjQuOS0yLjggMkgzYy0xLjEgMC0yIC45LTIgMnYxMmMwIDEuMS45IDIgMiAyaDE3YzEuMSAwIDItLjkgMi0yVjZjMC0xLjEtLjktMi0yLTJ6bS01LjQgMGMuMS0uNS42LTEgMS40LTEgLjggMCAxLjIuNSAxLjQgMXYxaC0yLjhWNHptNC40IDE0SDV2LTJoMTR2MnptMC00SDVWNmgxMS4ybDEuMSAySDIwdjZ6Ii8+PC9zdmc+" alt="Chat Icon">
        </div>
       
        <!-- Chatbot Interface -->
        <div class="chatbot-interface" id="chatbot-interface">
            <!-- Chatbot Header -->
            <div class="chatbot-header">
                <div class="chatbot-title">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiPjxwYXRoIGQ9Ik0xMiAxQzUuOSAxIDEgNS45IDEgMTJzNC45IDExIDExIDExIDExLTQuOSAxMS0xMVMxOC4xIDEgMTIgMXptMCAyMGMtNC45IDAtOS00LjEtOS05czQuMS05IDktOSA5IDQuMSA5IDktNC4xIDktOSA5eiIvPjxwYXRoIGQ9Ik0xMiA3Yy0uOCAwLTEuNS43LTEuNSAxLjVTMTEuMiAxMCAxMiAxMHMxLjUtLjcgMS41LTEuNVMxMi44IDcgMTIgN3ptLTMuNiA2LjVjLS4xLS41LS42LS44LTEuMS0uN2MtLjUuMS0uOC42LS43IDEuMUM3LjEgMTYuOSA5LjQgMTkgMTIgMTlzNC45LTIuMSA1LjQtNS4xYy4xLS41LS4yLTEtLjctMS4xLS41LS4xLTEgLjItMS4xLjdDMTUuMiAxNS43IDEzLjcgMTcgMTIgMTdzLTMuMi0xLjMtMy42LTMuNXoiLz48L3N2Zz4=" alt="Navie">
                    <h3>Navie</h3>
                </div>
                <div class="chatbot-close" id="chatbot-close">√ó</div>
            </div>
           
            <!-- Chatbot Messages Area -->
            <div class="chatbot-messages" id="chatbot-messages">
                <!-- Bot's welcome message will be added here by JavaScript -->
               
                <!-- Typing indicator -->
                <div class="typing-indicator" id="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
           
            <!-- Chatbot Input Area -->
            <div class="chatbot-input">
                <input type="text" id="user-input" placeholder="Type your message here..." aria-label="Type your message">
                <button id="send-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Move Bootstrap JS to end of body -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Fix script tag formatting -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const chatbotButton = document.getElementById('chatbot-button');
            const chatbotInterface = document.getElementById('chatbot-interface');
            const chatbotClose = document.getElementById('chatbot-close');
            const chatbotMessages = document.getElementById('chatbot-messages');
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');
            const typingIndicator = document.getElementById('typing-indicator');
            
            
           
            // Define quick reply options
            const initialQuickReplies = [
                "What is e-waste?",
                "Price estimation",
                "Collection process",
                "Environmental benefits"
            ];
           
            // Function to format messages with emojis and line breaks
           
            // Update createMessage function to handle formatted text
            function createMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(sender === 'bot' ? 'bot-message' : 'user-message');
                messageDiv.innerHTML = text;
                return messageDiv;
            }
           
            // Helper function to create quick reply buttons
            function createQuickReplies(options) {
                const quickRepliesDiv = document.createElement('div');
                quickRepliesDiv.classList.add('quick-replies');
               
                options.forEach(option => {
                    const button = document.createElement('div');
                    button.classList.add('quick-reply');
                    button.textContent = option;
                    button.addEventListener('click', function() {
                        sendMessage(option);
                    });
                    quickRepliesDiv.appendChild(button);
                });
               
                return quickRepliesDiv;
            }
           
            // Function to show the typing indicator
            function showTypingIndicator() {
                typingIndicator.style.display = 'block';
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }
           
            // Function to hide the typing indicator
            function hideTypingIndicator() {
                typingIndicator.style.display = 'none';
            }

            const API_KEY = "AIzaSyBM7ExLLh2KG9NiRXX-SWeG9t2VfDrneJQ"; 
            const MODEL = "gemini-2.0-flash";
            const URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`;

            // Knowledge Base for E-Waste FAQs
            const knowledgeBase = {
            Intro: "",
            // General E-Waste Information
            "what is e-waste":
                "E-waste refers to electronic waste - discarded electrical or electronic devices. This includes used electronics that are destined for reuse, resale, salvage, recycling, or disposal.",
            "why is e-waste recycling important":
                "E-waste recycling is crucial because electronic devices contain toxic substances like lead, mercury, and cadmium that can harm the environment and human health. Proper recycling also recovers valuable materials like gold, silver, copper, and rare earth elements, reducing the need for mining raw materials.",

            // Price Estimation
            "price estimation":
                "I can help estimate the value of your e-waste. üí∞ Here are typical price ranges:\n‚Ä¢ Laptops: ‚Çπ1,000-5,000\n‚Ä¢ Smartphones: ‚Çπ200-2,000\n‚Ä¢ Desktops: ‚Çπ800-3,000\n‚Ä¢ TVs: ‚Çπ500-2,000\n\nPlease specify which device you'd like to know about for more details.",

            "laptop":
                "Laptop pricing typically ranges from ‚Çπ1,000-5,000 depending on age and condition:\n‚Ä¢ Recent models (1-3 years): ‚Çπ3,000-5,000\n‚Ä¢ Older models (3-5 years): ‚Çπ1,500-3,000\n‚Ä¢ Non-working laptops: ‚Çπ500-1,500\n\nWould you like to schedule a pickup? üíª",

            "phone":
                "Smartphone values vary based on model and condition:\n‚Ä¢ Recent models (1-3 years): ‚Çπ800-2,000\n‚Ä¢ Older models: ‚Çπ200-800\n‚Ä¢ Non-working phones: ‚Çπ100-300\n\nWe ensure secure data wiping for all devices! üì±",

            "desktop":
                "Desktop computer values depend on specifications:\n‚Ä¢ Recent systems: ‚Çπ1,500-3,000\n‚Ä¢ Older systems: ‚Çπ800-1,500\n‚Ä¢ Non-working: ‚Çπ500-1,000\n\nThis includes the CPU unit only. Monitors are priced separately. üñ•Ô∏è",

            "tv": 'TV recycling values vary by type:\n‚Ä¢ LED/LCD (32"+): ‚Çπ500-2,000\n‚Ä¢ CRT TVs: ‚Çπ200-500\n‚Ä¢ Smart TVs: ‚Çπ1,000-2,500\n\nFree pickup available for TVs over 32 inches! üì∫',

            // Collection Process
            "collection":
                "Our collection process is simple:\n1Ô∏è‚É£ Schedule pickup via website/phone\n2Ô∏è‚É£ Our team arrives at your location\n3Ô∏è‚É£ We evaluate and weigh your e-waste\n4Ô∏è‚É£ Receive immediate payment\n\nWould you like to schedule a pickup?",

            "pickup":
                "Yes! We offer free pickup service for:\n‚Ä¢ Orders over 10kg\n‚Ä¢ Large items (TVs, refrigerators)\n‚Ä¢ Bulk collections\n\nWe're available 7 days a week! üöõ",

            "schedule":
                "You can schedule a pickup in 3 ways:\n1. Click the 'Book a Pickup' button above\n2. Call us at 9967960193\n3. Email us at navnirman.ai@gmail.com\n\nWe'll confirm your slot within 2 hours! üìÖ",

            // Environmental Impact
            "environmental benefits":
                "Proper e-waste recycling prevents toxic materials from entering landfills and water sources, reducing pollution. It also conserves natural resources by recovering valuable metals and materials, reducing the need for mining. Additionally, it saves energy - recycling aluminum uses 95% less energy than producing it from raw materials.",

            // Laws and Regulations
            "e-waste laws":
                "In India, e-waste management is regulated under the E-Waste Management Rules, 2016 (amended in 2018). These rules implement the Extended Producer Responsibility (EPR) concept, making manufacturers responsible for collecting and properly disposing of end-of-life products.",

            // Website specific information
            "how to schedule":
                "You can schedule a pickup through our website by clicking on the 'Book a Pickup' button in the carousel or heading to the Services page. Alternatively, you can call us at the number in the footer.",
            "rewards":
                "Our rewards program gives you points for each item recycled. These points can be redeemed for discounts on future services or exchanged for eco-friendly products in our rewards catalog. Check the 'Recycle and Earn' section for more details.",
            "events":
                "We regularly organize e-waste collection drives and awareness workshops. You can find information about upcoming events or book an event for your organization by clicking on the 'Book an Event' link in the navigation menu.",

            // New Questions and Answers
            "business disposal":
                "Special services for businesses: üè¢\n‚Ä¢ Bulk collection available\n‚Ä¢ Corporate compliance certificates\n‚Ä¢ Asset tracking and reporting\n‚Ä¢ Regular pickup schedules\n‚Ä¢ Volume-based pricing\n‚Ä¢ Dedicated account manager\n\nContact us for corporate rates!",

            "recycling certificate":
                "Yes, we provide recycling certificates! üìÑ\n‚Ä¢ Detailed inventory of items recycled\n‚Ä¢ Weight and category breakdown\n‚Ä¢ Environmental impact statement\n‚Ä¢ Compliance documentation\n‚Ä¢ Track your green initiatives\n\nPerfect for corporate compliance!",

            "payment methods":
                "We offer multiple payment options: üí≥\n‚Ä¢ Instant cash payment\n‚Ä¢ Bank transfer\n‚Ä¢ Digital wallets (PayTM, GPay)\n‚Ä¢ Corporate invoicing\n‚Ä¢ Reward points\n\nChoose what works best for you!",

            "warranty items":
                "For items under warranty: ‚ö†Ô∏è\n‚Ä¢ Check warranty status first\n‚Ä¢ Contact manufacturer for replacement\n‚Ä¢ We can guide you through the process\n‚Ä¢ Free evaluation service\n‚Ä¢ Responsible disposal if needed\n\nLet us help you make the right choice!",

            "bulk pickup":
                "Bulk pickup benefits: üì¶\n‚Ä¢ Free service for 10+ items\n‚Ä¢ Priority scheduling\n‚Ä¢ Better rates for large quantities\n‚Ä¢ Same-day service available\n‚Ä¢ Professional handling\n‚Ä¢ Complete documentation\n\nIdeal for office clearance!",

            "ewaste impact":
                "Impact of improper e-waste disposal: üåç\n‚Ä¢ Soil contamination\n‚Ä¢ Water pollution\n‚Ä¢ Air quality issues\n‚Ä¢ Health risks\n‚Ä¢ Resource wastage\n‚Ä¢ Climate change contribution\n\nLet's recycle responsibly!",

            "rewards program":
                "Join our rewards program: üéÅ\n‚Ä¢ Points for every item recycled\n‚Ä¢ Additional bonus for referrals\n‚Ä¢ Monthly recycling challenges\n‚Ä¢ Special member rates\n‚Ä¢ Exclusive eco-friendly products\n‚Ä¢ Regular rewards updates\n\nStart earning today!",

            "corporate program":
                "Corporate recycling programs: üíº\n‚Ä¢ Customized collection schedules\n‚Ä¢ Volume-based pricing\n‚Ä¢ Compliance reporting\n‚Ä¢ Employee awareness workshops\n‚Ä¢ CSR initiative support\n‚Ä¢ Asset management services\n\nLet's discuss your requirements!",

            "recycling steps":
                "Our recycling process: ‚ôªÔ∏è\n1. Collection & Sorting\n2. Data Security Check\n3. Dismantling\n4. Material Separation\n5. Resource Recovery\n6. Eco-friendly Processing\n7. Documentation\n\nAll steps follow environmental guidelines!",

            "documents required":
                "Required documents: üìù\n‚Ä¢ Valid ID proof\n‚Ä¢ Address proof\n‚Ä¢ Authorization letter (if corporate)\n‚Ä¢ Item ownership proof\n‚Ä¢ Warranty cards (if applicable)\n\nWe'll guide you through the process!",

            // Additional Questions and Answers
            "working hours":
                "Our service hours: ‚è∞\n‚Ä¢ Monday to Saturday: 9:00 AM - 7:00 PM\n‚Ä¢ Sundays: 10:00 AM - 5:00 PM\n‚Ä¢ Emergency pickups available\n‚Ä¢ Holiday schedule on website\n\nBook your preferred time slot!",

            "minimum quantity":
                "Minimum collection details: üìä\n‚Ä¢ Regular pickup: No minimum\n‚Ä¢ Free pickup: 5kg or more\n‚Ä¢ Bulk rates: 10kg or more\n‚Ä¢ Corporate pickup: Any quantity\n\nEvery item counts towards a greener future!",

            "preparation":
                "How to prepare items for recycling: üì¶\n‚Ä¢ Remove personal data\n‚Ä¢ Collect all accessories\n‚Ä¢ Keep original packaging (if possible)\n‚Ä¢ Separate batteries\n‚Ä¢ Group similar items\n‚Ä¢ List known issues\n\nNeed help? We can guide you!",

            "dangerous items":
                "Warning! These items need special handling: ‚ö†Ô∏è\n‚Ä¢ Damaged batteries\n‚Ä¢ Broken screens\n‚Ä¢ Water-damaged devices\n‚Ä¢ Items with chemical leaks\n‚Ä¢ Smoke-damaged electronics\n\nPlease inform us beforehand for safe handling!",

            "packing guidelines":
                "Packing tips for e-waste: üì¶\n‚Ä¢ Use original boxes if available\n‚Ä¢ Wrap items separately\n‚Ä¢ Secure loose parts\n‚Ä¢ Label fragile items\n‚Ä¢ Keep batteries separate\n‚Ä¢ Don't use metallic wires\n\nNeed packing materials? Let us know!",

            "instant quote":
                "Get an instant quote by providing: üí≠\n‚Ä¢ Device type and brand\n‚Ä¢ Age of device\n‚Ä¢ Working condition\n‚Ä¢ Physical condition\n‚Ä¢ Accessories included\n\nShare details for accurate pricing!",

            "cancellation policy":
                "Pickup cancellation policy: ‚ÑπÔ∏è\n‚Ä¢ Free cancellation 4 hours before\n‚Ä¢ Reschedule anytime\n‚Ä¢ No penalty first time\n‚Ä¢ Inform via call/WhatsApp\n‚Ä¢ Automatic rebooking option\n\nWe understand plans change!",

            "festival rates":
                "Special festival offers: üéâ\n‚Ä¢ Diwali green drive\n‚Ä¢ Christmas recycling bonus\n‚Ä¢ New year special rates\n‚Ä¢ Educational institution drives\n‚Ä¢ Community collection events\n\nCheck current promotions!",

            "recycling myths":
                "Common recycling myths: ü§î\n‚Ä¢ Myth: Data can be recovered\n‚Ä¢ Truth: We use military-grade wiping\n‚Ä¢ Myth: Small items don't matter\n‚Ä¢ Truth: Every item is valuable\n‚Ä¢ Myth: Recycling is costly\n‚Ä¢ Truth: We offer competitive rates\n\nAsk us for facts!",

            "certification":
                "Our Certifications: ‚úÖ\n‚Ä¢ ISO 14001:2015\n‚Ä¢ R2 Certification\n‚Ä¢ E-waste License\n‚Ä¢ Quality Management\n‚Ä¢ Safety Standards\n‚Ä¢ Environmental Compliance\n\nFully authorized recycler!"
            };
           
            // Function to process user message and get bot response
            async function botRespond(userMessage) {
                showTypingIndicator();

                try {
                    const response = await fetch(URL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: `You are Navie, an e-waste recycling assistant. Your task is to help users with e-waste recycling questions using the following knowledge base. If a question is not related to e-waste or isn't covered in the knowledge base, politely inform the user that you can only answer e-waste-related questions.

Knowledge Base: ${JSON.stringify(knowledgeBase)}

User Question: ${userMessage}

Please provide a helpful, friendly response based on the knowledge base. If the exact question isn't in the knowledge base, try to find the most relevant information to help the user.`
                                }]
                            }]
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                            

                    const result = await response.json();

                    // Hide typing indicator
                    hideTypingIndicator();

                    // Add bot response to chat
                    if (result.candidates && result.candidates[0] && result.candidates[0].content) {
                        const botResponse = result.candidates[0].content.parts[0].text;
                        chatbotMessages.appendChild(createMessage(botResponse, 'bot'));
                    } else {
                        chatbotMessages.appendChild(createMessage("I'm sorry, I couldn't process your request. Please try again.", 'bot'));
                    }

                    // Scroll to bottom
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

                } catch (error) {
                    console.error('Error:', error);
                    hideTypingIndicator();
                    chatbotMessages.appendChild(createMessage("I'm sorry, I encountered an error. Please try again later.", 'bot'));
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                }
            }
           
            // Function to send a user message
            function sendMessage(message) {
                // If no message or empty, don't proceed
                if (!message || message.trim() === '') return;
               
                // Clear the input field if the message comes from there
                if (message === userInput.value) {
                    userInput.value = '';
                }
               
                // Add user message to chat
                chatbotMessages.appendChild(createMessage(message, 'user'));
               
                // Scroll to bottom
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
               
                // Process response
                botRespond(message);
            }
           
            // Event Listeners
            chatbotButton.addEventListener('click', function() {
                chatbotInterface.classList.add('active');
                // If this is the first opening, show welcome message
                if (chatbotMessages.childElementCount <= 1) { // Only typing indicator exists
                    setTimeout(() => {
                        const welcomeMessage = "üëã Hi there! I'm Navie, your e-waste recycling assistant. I can help with price estimates for your old electronics and answer questions about our collection process. How can I help you today?";
                        chatbotMessages.appendChild(createMessage(welcomeMessage, 'bot'));
                        chatbotMessages.appendChild(createQuickReplies(initialQuickReplies));
                    }, 500);
                }
            });
           
            chatbotClose.addEventListener('click', function() {
                chatbotInterface.classList.remove('active');
            });
           
            sendButton.addEventListener('click', function() {
                sendMessage(userInput.value);
            });
           
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage(userInput.value);
                }
            });
        });
    </script>
</body>
</html>
